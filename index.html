<!DOCTYPE html>
<html lang="zh">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
    <title>WH1TE_LOG // HUMAN_INSTRUMENTALITY</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <link href="https://fonts.googleapis.com/css2?family=JetBrains+Mono:wght@400;700;800&family=Space+Grotesk:wght@300;500;700;900&family=Noto+Sans+JP:wght@400;700;900&display=swap" rel="stylesheet">
    <script src="https://unpkg.com/lucide@latest"></script>
    
    <script>
        tailwind.config = {
            theme: {
                extend: {
                    fontFamily: {
                        sans: ['"Space Grotesk"', '"Noto Sans JP"', 'sans-serif'],
                        mono: ['"JetBrains Mono"', '"Noto Sans JP"', 'monospace'],
                    },
                    colors: {
                        primary: 'var(--primary-color)',
                        secondary: 'var(--secondary-color)',
                        bg: 'var(--bg-color)',
                        surface: 'var(--surface-color)',
                    },
                    animation: {
                        'spin-slow': 'spin 30s linear infinite',
                        'pulse-fast': 'pulse 1.5s cubic-bezier(0.4, 0, 0.6, 1) infinite',
                        'glitch': 'glitch 3s linear infinite', 
                        'scan': 'scan 4s linear infinite', 
                        'warning-scroll': 'warningScroll 2s linear infinite',
                        'magi-pulse': 'magiPulse 4s ease-in-out infinite',
                        'pop-in': 'popIn 0.4s cubic-bezier(0.16, 1, 0.3, 1) forwards',
                    },
                    keyframes: {
                        scan: {
                            '0%': { backgroundPosition: '0 0' },
                            '100%': { backgroundPosition: '0 100%' },
                        },
                        warningScroll: {
                            '0%': { backgroundPosition: '0 0' },
                            '100%': { backgroundPosition: '40px 0' },
                        },
                        magiPulse: {
                            '0%, 100%': { opacity: 0.3, boxShadow: '0 0 10px var(--secondary-color)' },
                            '50%': { opacity: 0.8, boxShadow: '0 0 20px var(--secondary-color)' },
                        },
                        popIn: {
                            '0%': { opacity: 0, transform: 'scale(0.9) translateY(20px)' },
                            '100%': { opacity: 1, transform: 'scale(1) translateY(0)' },
                        },
                        cyberSwap: {
                            '0%': { opacity: 0.8, transform: 'translateX(0)' },
                            '25%': { opacity: 0.6, transform: 'translateX(-5px) skewX(10deg)' },
                            '50%': { opacity: 0.9, transform: 'translateX(5px) skewX(-10deg)' },
                            '75%': { opacity: 0.4, transform: 'translateX(0)' },
                            '100%': { opacity: 0.8, transform: 'translateX(0)' },
                        }
                    }
                }
            }
        }
    </script>

    <style>
        :root {
            --mouse-x: 50%;
            --mouse-y: 50%;
            --cursor-size: 800px;

            /* === 默认: 初号机 (UNIT-01) === */
            --primary-color: #b15dff;
            --secondary-color: #39ff14;
            --bg-color: #0f0518;
            --surface-color: rgba(26, 11, 46, 0.85);
            --grid-color: rgba(125, 42, 232, 0.15);
            --hue-rotate: 260deg;
        }
        
        /* === THEMES === */
        [data-theme="unit-02"] { --primary-color: #ffae00; --secondary-color: #ff0000; --bg-color: #140202; --surface-color: rgba(46, 11, 11, 0.85); --grid-color: rgba(255, 0, 0, 0.15); --hue-rotate: 0deg; }
        [data-theme="unit-00"] { --primary-color: #ffffff; --secondary-color: #0091ff; --bg-color: #020a14; --surface-color: rgba(11, 20, 46, 0.85); --grid-color: rgba(0, 145, 255, 0.15); --hue-rotate: 180deg; }
        [data-theme="unit-08"] { --primary-color: #ff5cab; --secondary-color: #50c878; --bg-color: #14020d; --surface-color: rgba(46, 11, 29, 0.85); --grid-color: rgba(255, 0, 153, 0.15); --hue-rotate: 300deg; }

        body { 
            background-color: var(--bg-color); 
            min-height: 100vh; 
            color: white; 
            transition: background-color 0.6s ease, color 0.6s ease; 
            overflow-x: hidden; 
            cursor: crosshair; 
        }

        /* 背景装饰 */
        .hex-bg {
            position: fixed; top: 0; left: 0; width: 100%; height: 100%; pointer-events: none; z-index: -2;
            background-image: 
                radial-gradient(circle at center, transparent 0%, var(--bg-color) 80%),
                url("data:image/svg+xml,%3Csvg width='60' height='104' viewBox='0 0 60 104' xmlns='http://www.w3.org/2000/svg'%3E%3Cpath d='M30 0l30 17.32v34.64L30 69.28 0 51.96V17.32L30 0z' fill='none' stroke='%23ffffff' stroke-opacity='0.05' stroke-width='1'/%3E%3C/svg%3E");
            mask-image: linear-gradient(to bottom, black, transparent);
        }
        
        /* 随机闪烁 */
        .hex-flash {
            position: absolute; width: 60px; height: 104px;
            background: var(--secondary-color);
            clip-path: polygon(50% 0%, 100% 25%, 100% 75%, 50% 100%, 0% 75%, 0% 25%);
            opacity: 0;
            animation: hexFlash 4s infinite;
        }
        @keyframes hexFlash { 0%, 90% { opacity: 0; } 92% { opacity: 0.1; } 94% { opacity: 0; } }

        /* 鼠标光晕 */
        #cursor-glow { position: fixed; top: 0; left: 0; width: 100%; height: 100%; pointer-events: none; z-index: -1; background-image: radial-gradient(circle var(--cursor-size) at var(--mouse-x) var(--mouse-y), var(--grid-color) 0%, transparent 60%); transition: --cursor-size 0.1s ease; will-change: background-image; mix-blend-mode: screen; }

        /* UI 卡片 */
        .cyber-card {
            background: var(--surface-color); 
            backdrop-filter: blur(12px);
            border: 1px solid var(--secondary-color); 
            clip-path: polygon(0 0, 100% 0, 100% calc(100% - 20px), calc(100% - 20px) 100%, 0 100%);
            transition: all 0.4s cubic-bezier(0.16, 1, 0.3, 1);
        }
        .cyber-card:hover { 
            background: rgba(255, 255, 255, 0.03); 
            box-shadow: 0 0 15px var(--secondary-color); 
            border-color: var(--primary-color);
            transform: translateY(-4px); 
        }

        /* 人物滤镜 - 修正版 (移除可能导致白边的效果) */
        .image-filter-clean { 
            /* 仅保留色相旋转，移除对比度和阴影，避免抠图边缘发白 */
            filter: hue-rotate(var(--hue-rotate));
            mix-blend-mode: normal; 
            opacity: 0.85;
            background: transparent !important; /* 强制背景透明 */
            mask-image: linear-gradient(to bottom, black 70%, transparent 100%);
            will-change: transform, filter; 
            transition: all 0.5s ease; 
        }
        
        /* 故障动画 */
        .cyber-swap-active { animation: cyberSwap 0.4s steps(4) forwards; }

        /* 警告条 */
        .eva-warning-strip {
            position: fixed; bottom: 0; left: 0; width: 100%; height: 12px; z-index: 999; pointer-events: none;
            background: repeating-linear-gradient(-45deg, #000, #000 10px, var(--secondary-color) 10px, var(--secondary-color) 20px);
            border-top: 2px solid black;
            animation: warningScroll 4s linear infinite;
        }

        .magi-font { font-family: 'Space Grotesk', sans-serif; font-weight: 900; letter-spacing: -0.05em; }
        
        /* 主题按钮 */
        .theme-btn { 
            width: 30px; height: 6px; transform: skewX(-30deg); cursor: pointer; 
            border: 1px solid rgba(255,255,255,0.2); transition: all 0.3s; margin-right: 4px;
        }
        .theme-btn.active { border-color: white; box-shadow: 0 0 15px currentColor; background-color: currentColor !important; }

        ::-webkit-scrollbar { width: 4px; }
        ::-webkit-scrollbar-track { background: var(--bg-color); }
        ::-webkit-scrollbar-thumb { background: var(--secondary-color); border-radius: 2px; }

        /* HUD 角落 */
        .hud-corner { position: fixed; width: 40px; height: 40px; border: 2px solid var(--secondary-color); z-index: 50; pointer-events: none; opacity: 0.6; }
        .hud-tl { top: 20px; left: 20px; border-right: 0; border-bottom: 0; }
        .hud-tr { top: 20px; right: 20px; border-left: 0; border-bottom: 0; }
        .hud-bl { bottom: 20px; left: 20px; border-right: 0; border-top: 0; }
        .hud-br { bottom: 20px; right: 20px; border-left: 0; border-top: 0; }

        /* 开机终端 */
        .crt-overlay {
            position: fixed; top: 0; left: 0; width: 100vw; height: 100vh; z-index: 9999; pointer-events: none;
            background: linear-gradient(rgba(18, 16, 16, 0) 50%, rgba(0, 0, 0, 0.25) 50%), linear-gradient(90deg, rgba(255, 0, 0, 0.06), rgba(0, 255, 0, 0.02), rgba(0, 0, 255, 0.06));
            background-size: 100% 2px, 6px 100%;
            opacity: 0.2; mix-blend-mode: overlay;
        }
        #boot-sequence {
            position: fixed; inset: 0; background: #000; z-index: 10000;
            display: flex; flex-direction: column; justify-content: flex-end; padding: 40px;
            font-family: 'JetBrains Mono', monospace; color: var(--primary-color); font-size: 14px;
            transition: opacity 1s ease-out;
        }
        .boot-line { opacity: 0; animation: type-line 0.1s forwards; white-space: pre-wrap; margin-bottom: 4px; }
        @keyframes type-line { to { opacity: 1; } }
    </style>
</head>
<body class="antialiased overflow-x-hidden font-sans">

    <!-- 特效层 -->
    <div class="crt-overlay"></div>
    <div id="boot-sequence" style="display: none;"></div>

    <!-- 背景装饰 -->
    <div class="hex-bg"></div>
    <div class="hex-flash" style="top: 20%; left: 10%;"></div>
    <div class="hex-flash" style="top: 60%; right: 15%; animation-delay: 2s;"></div>

    <div id="cursor-glow"></div>
    <div class="eva-warning-strip"></div>

    <!-- HUD -->
    <div class="hud-corner hud-tl"></div>
    <div class="hud-corner hud-tr"></div>
    <div class="hud-corner hud-bl"></div>
    <div class="hud-corner hud-br"></div>

    <!-- 音乐播放器 -->
    <audio id="background-music" crossorigin="anonymous" loop>
        <source src="./audio/bgm.mp3" type="audio/mp3">
    </audio>

    <div id="sonic-deck" class="fixed bottom-8 left-8 z-50 flex items-center gap-3 bg-black/80 border border-secondary p-2 pr-4 group hover:shadow-[0_0_20px_var(--secondary-color)] transition-all duration-300" style="clip-path: polygon(10px 0, 100% 0, 100% calc(100% - 10px), calc(100% - 10px) 100%, 0 100%, 0 10px);">
        <canvas id="audio-visualizer" class="absolute bottom-0 left-0 w-full h-full opacity-30 pointer-events-none"></canvas>
        <div class="w-12 h-12 flex items-center justify-center cursor-pointer bg-secondary/10 hover:bg-secondary/20 transition-colors border border-secondary/30" onclick="toggleMusic()">
            <div id="deck-wave" class="absolute border border-secondary w-full h-full animate-ping hidden"></div>
            <i data-lucide="disc" class="w-6 h-6 text-secondary animate-spin-slow"></i>
        </div>
        <div class="flex flex-col w-0 group-hover:w-48 overflow-hidden transition-all duration-300 opacity-0 group-hover:opacity-100 pl-2">
            <div class="text-[10px] font-mono text-primary whitespace-nowrap font-bold">SOUND_ONLY // TRACK_01</div>
            <div class="flex items-center gap-2 mt-1">
                 <span class="text-[8px] text-secondary">VOL</span>
                 <input type="range" class="w-full h-1 bg-white/20 appearance-none cursor-pointer" min="0" max="1" step="0.1" oninput="setVolume(this.value)">
            </div>
        </div>
    </div>

    <!-- 导航栏 -->
    <nav class="fixed top-0 w-full z-40 px-6 md:px-12 py-6 flex justify-between items-center bg-gradient-to-b from-bg to-transparent select-none">
        <div class="flex items-center gap-6">
            <a href="index.html" class="group flex flex-col">
                <span class="text-2xl font-black tracking-tighter leading-none text-white group-hover:text-primary transition-colors italic magi-font">WH1TE.LOG</span>
                <div class="flex items-center gap-2 mt-1">
                    <span class="w-2 h-2 bg-secondary animate-pulse"></span>
                    <span class="font-mono text-[9px] tracking-[0.3em] opacity-60 group-hover:opacity-100 text-secondary">VER.2.0.5</span>
                </div>
            </a>
            
            <!-- EVA 机体主题切换器 -->
            <div class="flex gap-2 ml-8 items-center px-4 py-1 border-l border-white/10">
                <div class="theme-btn active" style="background: #7d2ae8; border-color: #39ff14;" onclick="setTheme('default')" title="Unit-01 (Shinji)"></div>
                <div class="theme-btn" style="background: #d90000; border-color: #ffae00;" onclick="setTheme('unit-02')" title="Unit-02 (Asuka)"></div>
                <div class="theme-btn" style="background: #0091ff; border-color: #ffffff;" onclick="setTheme('unit-00')" title="Unit-00 (Rei)"></div>
                <div class="theme-btn" style="background: #ff5cab; border-color: #50c878;" onclick="setTheme('unit-08')" title="Unit-08 (Mari)"></div>
            </div>
        </div>
        
        <div class="hidden md:flex gap-8 font-mono text-xs tracking-widest font-bold">
            <a href="#" class="text-secondary border-b-2 border-secondary pb-1">01_HOME</a>
            <a href="#" class="text-gray-500 hover:text-primary transition-colors">02_ARCHIVES</a>
            <a href="#" class="text-gray-500 hover:text-primary transition-colors">03_ABOUT</a>
        </div>
    </nav>

    <!-- Hero 区域 -->
    <header class="relative pt-48 pb-12 max-w-screen-xl mx-auto px-6 md:px-12 flex flex-col justify-center items-start text-left z-20 min-h-[65vh]">
        <!-- MAGI 装饰 -->
        <div class="absolute top-24 right-[20%] opacity-30 pointer-events-none z-0 hidden lg:flex flex-col gap-3 scale-90 origin-top-right">
            <div class="magi-node w-56 h-12 skew-x-12 animate-magi-pulse border border-secondary text-secondary flex items-center justify-center text-xs font-bold">MELCHIOR - 1</div>
            <div class="magi-node w-56 h-12 skew-x-12 ml-12 animate-magi-pulse border border-secondary text-secondary flex items-center justify-center text-xs font-bold" style="animation-delay: 1s;">BALTHASAR - 2</div>
            <div class="magi-node w-56 h-12 skew-x-12 ml-24 animate-magi-pulse border border-secondary text-secondary flex items-center justify-center text-xs font-bold" style="animation-delay: 2s;">CASPER - 3</div>
        </div>

        <div class="space-y-8 animate-pop-in w-full relative z-10 max-w-3xl">
            <div class="flex items-center gap-3 mb-2">
                <span class="px-3 py-1 bg-secondary text-black font-mono text-[10px] font-black uppercase tracking-widest">System Ready</span>
                <span class="w-24 h-px bg-secondary/50"></span>
                <span class="font-mono text-[10px] text-primary">SYNC RATE: 400%</span>
            </div>

            <div class="relative inline-block">
                <h1 class="text-7xl md:text-8xl lg:text-9xl font-black tracking-tighter leading-none text-white mix-blend-overlay opacity-90 magi-font">WH1TE_LOG</h1>
                <h1 class="text-7xl md:text-8xl lg:text-9xl font-black tracking-tighter leading-none text-stroke-layer absolute top-0 left-0 w-full h-full translate-x-[3px] translate-y-[3px]">WH1TE_LOG</h1>
            </div>
            
            <div class="flex items-center gap-4 pl-4 border-l-4 border-secondary">
                <h2 class="text-2xl font-bold text-white tracking-tight">互联网<span class="text-secondary">补完计划</span> <span class="text-xs font-mono opacity-60 ml-2 tracking-widest text-primary">DIGITAL ARCHIVE PROJECT</span></h2>
            </div>

            <div class="mt-16 relative w-full max-w-xl group">
                <div class="absolute -top-4 left-0 bg-bg px-2 text-[10px] font-mono text-secondary border border-secondary/50">SEARCH_DATABASE</div>
                <input type="text" id="search-input" placeholder="ENTER KEYWORD..." oninput="searchArticles()" class="w-full pl-6 pr-12 py-5 bg-black/30 backdrop-blur-xl border-b-2 border-white/20 text-white font-mono text-xl placeholder-white/10 focus:border-secondary focus:bg-black/50 focus:outline-none transition-all uppercase tracking-widest">
                <div class="absolute right-0 bottom-0 w-0 h-0 border-l-[12px] border-l-transparent border-b-[12px] border-b-secondary"></div>
            </div>
        </div>
    </header>

    <!-- 人物图片 - 默认显示真嗣 -->
    <div class="fixed right-0 bottom-0 z-0 pointer-events-none w-[45vw] max-w-[750px] flex items-end justify-end">
        <img 
            id="hero-character"
            src="./images/shinji.png" 
            alt="Cyberpunk Hero" 
            class="w-full h-auto object-contain image-filter-clean transition-opacity duration-500"
        >
    </div>

    <main class="max-w-screen-xl mx-auto px-6 md:px-12 pb-32 relative z-20">
        <div class="grid grid-cols-1 lg:grid-cols-12 gap-16">
            <!-- 左侧边栏 -->
            <aside class="lg:col-span-4 space-y-10 lg:sticky lg:top-32 h-fit">
                <div id="ai-card" class="ai-card-container cursor-pointer group" onclick="triggerAiSpeech()">
                    <div id="ai-speech-bubble" class="hidden absolute -top-20 left-0 w-full z-50 animate-pop-in pointer-events-none">
                        <div class="bg-bg/95 border border-primary p-4 relative shadow-[4px_4px_0_var(--secondary-color)]">
                             <p id="ai-speech-text" class="text-xs font-bold font-mono text-primary leading-relaxed"></p>
                             <div class="absolute -bottom-2 left-8 w-4 h-4 bg-bg border-r border-b border-primary transform rotate-45"></div>
                        </div>
                    </div>
                    <div class="w-full relative aspect-[4/5] overflow-hidden bg-black/40">
                        <img src="./images/ai-assistant.jpg" onerror="this.style.display='none'" alt="AI" class="w-full h-full object-cover opacity-90 mix-blend-lighten group-hover:scale-105 transition-transform duration-500 filter contrast-125">
                        <div class="absolute inset-0 bg-gradient-to-t from-bg via-transparent to-transparent"></div>
                        <div class="absolute top-2 right-2 text-[9px] font-mono text-black bg-secondary px-1 font-bold">LIVE</div>
                    </div>
                    <div class="p-5 border-t border-secondary/30 relative overflow-hidden">
                        <div class="absolute top-0 right-0 w-full h-full bg-secondary/5 -skew-x-12 transform translate-x-full group-hover:translate-x-0 transition-transform duration-300"></div>
                        <div class="flex items-center justify-between mb-2 relative z-10">
                            <h3 class="font-mono text-primary text-sm font-bold tracking-wider">:: AI_ASSISTANT</h3>
                            <div class="w-2 h-2 bg-secondary animate-pulse rounded-full"></div>
                        </div>
                        <p class="text-gray-400 text-[10px] font-mono relative z-10">STATUS: <span id="ai-status-text" class="text-secondary font-bold">ONLINE</span></p>
                    </div>
                </div>

                <div class="cyber-card p-6 relative overflow-hidden">
                    <div class="absolute top-0 right-0 w-12 h-12 border-t-2 border-r-2 border-secondary/30 rounded-tr-xl"></div>
                    <h3 class="font-mono text-secondary text-xs font-bold mb-5 border-b border-white/10 pb-3 flex justify-between items-center">
                        <span class="flex items-center gap-2"><i data-lucide="tv" class="w-3 h-3"></i> ANIME_FEED</span>
                        <span id="anime-date" class="text-[9px] text-gray-500">LOADING...</span>
                    </h3>
                    <div id="anime-list" class="space-y-3 font-mono text-[10px] text-gray-300 max-h-64 overflow-y-auto pr-2 custom-scrollbar"></div>
                </div>

                <div class="cyber-card p-6">
                    <h3 class="font-mono text-gray-500 text-[10px] mb-4 tracking-[0.2em]">:: TAG_CLOUD</h3>
                    <div class="flex flex-wrap gap-3">
                         <button onclick="filterByTag('Novel')" class="px-3 py-1.5 bg-white/5 border border-white/10 hover:bg-secondary hover:text-black hover:border-secondary text-[10px] font-mono transition-all uppercase tracking-wider">#Novel</button>
                         <button onclick="filterByTag('Code')" class="px-3 py-1.5 bg-white/5 border border-white/10 hover:bg-secondary hover:text-black hover:border-secondary text-[10px] font-mono transition-all uppercase tracking-wider">#Code</button>
                         <button onclick="filterByTag('Web')" class="px-3 py-1.5 bg-white/5 border border-white/10 hover:bg-secondary hover:text-black hover:border-secondary text-[10px] font-mono transition-all uppercase tracking-wider">#Web</button>
                    </div>
                </div>
            </aside>

            <!-- 右侧内容区 -->
            <div class="lg:col-span-8 space-y-10">
                <div class="flex items-center justify-between border-b-2 border-white/10 pb-4">
                    <h2 class="text-3xl font-black tracking-tighter text-white">DATA_LOGS</h2>
                    <div class="flex items-center gap-2">
                        <div class="w-1.5 h-1.5 bg-secondary animate-ping"></div>
                        <span class="font-mono text-xs text-secondary">[ RECORDING ]</span>
                    </div>
                </div>
                <div id="article-list-container" class="space-y-8">
                    <article class="article-card cyber-card p-8 group hover:bg-white/5 cursor-pointer relative overflow-hidden" data-tags="Novel ACG WhiteAlbum2">
                        <div class="absolute -right-10 -top-10 w-40 h-40 bg-secondary/10 blur-3xl opacity-0 group-hover:opacity-100 transition-opacity"></div>
                        <div class="flex flex-col gap-4 relative z-10">
                            <div class="flex justify-between items-start font-mono text-[10px]">
                                <div class="flex gap-2">
                                    <span class="bg-secondary text-black px-1.5 py-0.5 font-bold">NOVEL</span>
                                    <span class="border border-white/20 text-gray-400 px-1.5 py-0.5">WA2</span>
                                </div>
                                <span class="text-gray-500">2025.10.05</span>
                            </div>
                            <h3 class="text-3xl font-bold leading-tight group-hover:text-secondary transition-colors duration-300">雪融化、然后直到再次飘落时</h3>
                            <p class="text-gray-400 text-sm leading-relaxed pl-4 border-l-2 border-white/10 group-hover:border-secondary transition-colors article-summary">冬马和纱，很讨厌天空。春天，当她翘掉自己今后每天都要去的峰城大学附属学园的入学仪式...</p>
                            <div class="flex justify-end mt-4">
                                <span class="font-mono text-xs text-primary font-bold opacity-0 group-hover:opacity-100 transition-opacity flex items-center gap-1">READ_ENTRY <i data-lucide="chevron-right" class="w-3 h-3"></i></span>
                            </div>
                        </div>
                    </article>
                    <article class="article-card cyber-card p-8 group hover:bg-white/5 cursor-pointer relative overflow-hidden" data-tags="Python Automation">
                        <div class="absolute -right-10 -top-10 w-40 h-40 bg-secondary/10 blur-3xl opacity-0 group-hover:opacity-100 transition-opacity"></div>
                        <div class="flex flex-col gap-4 relative z-10">
                            <div class="flex justify-between items-start font-mono text-[10px]">
                                <div class="flex gap-2">
                                    <span class="bg-secondary text-black px-1.5 py-0.5 font-bold">PYTHON</span>
                                    <span class="border border-white/20 text-gray-400 px-1.5 py-0.5">AUTO</span>
                                </div>
                                <span class="text-gray-500">2025.10.03</span>
                            </div>
                            <h3 class="text-3xl font-bold leading-tight group-hover:text-secondary transition-colors duration-300">Python 主页自动生成脚本测试</h3>
                            <p class="text-gray-400 text-sm leading-relaxed pl-4 border-l-2 border-white/10 group-hover:border-secondary transition-colors article-summary">辅助静态页面更新的自动化生成脚本第一次测试，探索如何高效管理我的数字花园。</p>
                            <div class="flex justify-end mt-4">
                                <span class="font-mono text-xs text-primary font-bold opacity-0 group-hover:opacity-100 transition-opacity flex items-center gap-1">READ_ENTRY <i data-lucide="chevron-right" class="w-3 h-3"></i></span>
                            </div>
                        </div>
                    </article>
                    <article class="article-card cyber-card p-8 group hover:bg-white/5 cursor-pointer relative overflow-hidden" data-tags="Code Reflection">
                         <div class="absolute -right-10 -top-10 w-40 h-40 bg-secondary/10 blur-3xl opacity-0 group-hover:opacity-100 transition-opacity"></div>
                        <div class="flex flex-col gap-4 relative z-10">
                            <div class="flex justify-between items-start font-mono text-[10px]">
                                <div class="flex gap-2">
                                    <span class="bg-secondary text-black px-1.5 py-0.5 font-bold">CODE</span>
                                    <span class="border border-white/20 text-gray-400 px-1.5 py-0.5">WEB</span>
                                </div>
                                <span class="text-gray-500">2025.10.01</span>
                            </div>
                            <h3 class="text-3xl font-bold leading-tight group-hover:text-secondary transition-colors duration-300">从 Appium 到网站：我与代码的旅程初探</h3>
                            <p class="text-gray-400 text-sm leading-relaxed pl-4 border-l-2 border-white/10 group-hover:border-secondary transition-colors article-summary">起初我以为编程就是找个工具抢票，最终却被安全机制所阻止。这次经历让我明白：真正的编程价值在于构建思维框架。</p>
                            <div class="flex justify-end mt-4">
                                <span class="font-mono text-xs text-primary font-bold opacity-0 group-hover:opacity-100 transition-opacity flex items-center gap-1">READ_ENTRY <i data-lucide="chevron-right" class="w-3 h-3"></i></span>
                            </div>
                        </div>
                    </article>
                </div>
            </div>
        </div>
    </main>

    <!-- Footer -->
    <footer class="border-t border-white/10 bg-surface backdrop-blur-xl mt-20 relative z-20 py-16">
        <div class="max-w-screen-xl mx-auto px-6 md:px-12 flex flex-col md:flex-row justify-between gap-8">
            <div>
                <h2 class="text-3xl font-black text-white tracking-tighter magi-font">WH1TE.LOG</h2>
                <p class="font-mono text-[10px] text-gray-500 mt-2 tracking-widest">HUMAN INSTRUMENTALITY PROJECT</p>
            </div>
            <div class="font-mono text-[10px] text-gray-600 text-right">
                <p>&copy; 2025 NERV. ALL RIGHTS RESERVED.</p>
                <p class="mt-1 uppercase tracking-wider">God's in his heaven. All's right with the world.</p>
            </div>
        </div>
    </footer>

    <!-- 模态框 -->
    <div id="anime-modal" class="fixed inset-0 z-[100] hidden items-center justify-center bg-bg/90 backdrop-blur-md cursor-pointer" onclick="closeAnimeModal()">
        <div class="relative w-full max-w-4xl bg-bg border border-secondary p-8 flex gap-8 shadow-[0_0_50px_rgba(0,0,0,0.5)]" onclick="event.stopPropagation()">
            <div class="absolute top-0 left-0 w-32 h-32 border-t-2 border-l-2 border-secondary -translate-x-2 -translate-y-2"></div>
            <div class="absolute bottom-0 right-0 w-32 h-32 border-b-2 border-r-2 border-secondary translate-x-2 translate-y-2"></div>
            <div class="w-1/3 bg-gray-900 relative overflow-hidden group">
                <img id="modal-cover" src="" class="w-full h-full object-cover opacity-80 group-hover:opacity-100 transition-opacity duration-500">
                <div class="absolute inset-0 bg-gradient-to-b from-transparent to-black/60"></div>
                <div class="absolute bottom-0 left-0 w-full h-1 bg-secondary animate-scan"></div>
            </div>
            <div class="w-2/3 text-left space-y-6">
                <div class="flex items-center gap-2 text-secondary font-mono text-xs">
                    <span class="w-2 h-2 bg-secondary"></span>
                    <span>DATA_RETRIEVED</span>
                </div>
                <h2 id="modal-title" class="text-4xl font-black text-white magi-font leading-none">LOADING...</h2>
                <div class="flex gap-6 text-xs font-mono text-primary border-y border-white/10 py-3">
                    <span>RATING: <span id="modal-rating" class="text-white font-bold text-lg">--</span></span>
                    <span>ID: <span id="modal-id" class="text-white">--</span></span>
                </div>
                <p id="modal-summary" class="text-sm text-gray-300 font-mono leading-relaxed">Fetching classified data from MAGI system...</p>
            </div>
        </div>
    </div>

    <script>
        lucide.createIcons();

        // 交互与特效
        let ticking = false;
        document.addEventListener('mousemove', (e) => {
            if (!ticking) {
                window.requestAnimationFrame(() => {
                    const x = (e.clientX / window.innerWidth) * 100;
                    const y = (e.clientY / window.innerHeight) * 100;
                    document.documentElement.style.setProperty('--mouse-x', `${x}%`);
                    document.documentElement.style.setProperty('--mouse-y', `${y}%`);
                    ticking = false;
                });
                ticking = true;
            }
        });

        document.addEventListener('mousedown', (e) => {
            createATField(e.clientX, e.clientY);
        });

        function createATField(x, y) {
            const atField = document.createElement('div');
            atField.style.cssText = `
                position: fixed; top: ${y}px; left: ${x}px; width: 10px; height: 10px;
                border: 2px solid #ffa500; background: rgba(255, 165, 0, 0.2);
                transform: translate(-50%, -50%);
                clip-path: polygon(30% 0%, 70% 0%, 100% 30%, 100% 70%, 70% 100%, 30% 100%, 0% 70%, 0% 30%);
                z-index: 9998; pointer-events: none; transition: all 0.4s ease-out; box-shadow: 0 0 10px #ffa500;
            `;
            document.body.appendChild(atField);
            requestAnimationFrame(() => {
                atField.style.width = '150px';
                atField.style.height = '150px';
                atField.style.opacity = '0';
                atField.style.transform = 'translate(-50%, -50%) rotate(45deg)';
            });
            setTimeout(() => atField.remove(), 400);
        }

        function startHeroGlitch() {
            const heroImg = document.getElementById('hero-character');
            if(!heroImg) return;
            setInterval(() => {
                heroImg.classList.add('cyber-swap-active');
                setTimeout(() => { heroImg.classList.remove('cyber-swap-active'); }, 400);
            }, 5000); 
        }

        const characterMap = {
            'default': './images/shinji.png',
            'unit-02': './images/asuka.png',
            'unit-00': './images/shinji.png',
            'unit-08': './images/shinji.png'
        };

        function setTheme(themeName) {
            document.documentElement.setAttribute('data-theme', themeName);
            localStorage.setItem('theme', themeName);
            
            document.querySelectorAll('.theme-btn').forEach(btn => {
                btn.classList.remove('active');
                if(btn.getAttribute('onclick').includes(themeName)) btn.classList.add('active');
            });
            
            const heroImg = document.getElementById('hero-character');
            if (heroImg && characterMap[themeName]) {
                 heroImg.style.opacity = 0;
                 setTimeout(() => {
                     heroImg.src = characterMap[themeName];
                     heroImg.onload = () => { heroImg.style.opacity = 0.85; };
                 }, 200);
            }
        }
        const savedTheme = localStorage.getItem('theme') || 'default';
        setTheme(savedTheme);

        // AI 逻辑
        const eririLines = ["哼，才不是特意等你的！", "检测到不明入侵... 啊，是你啊。", "笨蛋！AT立场要全开啊！", "MAGI 正在通过提案...", "不要盯着我看！变态！", "Code 404: Tsundere not found."];
        let aiSpeechInterval = null;
        function triggerAiSpeech() {
            const bubble = document.getElementById('ai-speech-bubble');
            const textEl = document.getElementById('ai-speech-text');
            const statusEl = document.getElementById('ai-status-text');
            if (aiSpeechInterval) clearInterval(aiSpeechInterval);
            bubble.classList.remove('hidden');
            statusEl.innerText = "SPEAKING...";
            statusEl.classList.add("text-primary");
            const line = eririLines[Math.floor(Math.random() * eririLines.length)];
            textEl.innerText = "";
            let i = 0;
            aiSpeechInterval = setInterval(() => {
                if (i < line.length) { textEl.innerText += line.charAt(i); i++; } else {
                    clearInterval(aiSpeechInterval);
                    setTimeout(() => { bubble.classList.add('hidden'); statusEl.innerText = "ONLINE"; statusEl.classList.remove("text-primary"); }, 3000);
                }
            }, 50);
        }

        // Audio & Bangumi
        let audioContext, analyser, source, canvasCtx;
        const audioEl = document.getElementById('background-music');
        const canvas = document.getElementById('audio-visualizer');
        
        function initAudio() {
            if(audioContext) return;
            const AudioContext = window.AudioContext || window.webkitAudioContext;
            audioContext = new AudioContext();
            analyser = audioContext.createAnalyser();
            source = audioContext.createMediaElementSource(audioEl);
            source.connect(analyser);
            analyser.connect(audioContext.destination);
            analyser.fftSize = 64;
            canvas.width = canvas.offsetWidth;
            canvas.height = canvas.offsetHeight;
            canvasCtx = canvas.getContext('2d');
            drawVisualizer();
        }

        function drawVisualizer() {
            requestAnimationFrame(drawVisualizer);
            const bufferLength = analyser.frequencyBinCount;
            const dataArray = new Uint8Array(bufferLength);
            analyser.getByteFrequencyData(dataArray);
            canvasCtx.clearRect(0, 0, canvas.width, canvas.height);
            const barWidth = (canvas.width / bufferLength) * 2;
            let x = 0;
            const primaryColor = getComputedStyle(document.documentElement).getPropertyValue('--secondary-color').trim();
            canvasCtx.fillStyle = primaryColor;
            for(let i = 0; i < bufferLength; i++) {
                const barHeight = dataArray[i] / 2;
                canvasCtx.fillRect(x, canvas.height - barHeight, barWidth, barHeight);
                x += barWidth + 1;
            }
        }

        function toggleMusic() {
            if(!audioContext) initAudio();
            if(audioContext.state === 'suspended') audioContext.resume();
            const wave = document.getElementById('deck-wave');
            const icon = document.querySelector('#sonic-deck i');
            if(audioEl.paused) {
                audioEl.play().then(() => {
                    wave.classList.remove('hidden'); icon.setAttribute('data-lucide', 'pause'); lucide.createIcons();
                }).catch(e => console.log(e));
            } else {
                audioEl.pause(); wave.classList.add('hidden'); icon.setAttribute('data-lucide', 'disc'); lucide.createIcons();
            }
        }
        function setVolume(val) { audioEl.volume = val; }

        const mockData = [{ id: 388296, name: "香格里拉·开拓异境", rating: { score: "8.1" }, images: { large: "https://lain.bgm.tv/pic/cover/l/13/9a/388296_7787Y.jpg" } }];
        async function loadAnimeData() {
            const dateDisplay = document.getElementById('anime-date');
            const today = new Date();
            dateDisplay.innerHTML = `${today.getMonth()+1}/${today.getDate()}`;
            let bangumiWeekday = today.getDay() === 0 ? 7 : today.getDay();
            try {
                const response = await fetch('https://corsproxy.io/?' + encodeURIComponent('https://api.bgm.tv/calendar'));
                if (!response.ok) throw new Error('API Error');
                const data = await response.json();
                const todayData = data.find(day => day.weekday.id === bangumiWeekday);
                renderList(todayData && todayData.items.length > 0 ? todayData.items : mockData);
            } catch (error) {
                renderList(mockData); dateDisplay.innerHTML += ' <span class="text-red-500">OFFLINE</span>';
            }
        }
        const renderList = (items) => {
             const container = document.getElementById('anime-list');
             container.innerHTML = items.map(item => {
                    const title = item.name_cn || item.name;
                    const score = item.rating?.score || 'N/A';
                    const image = item.images?.large || item.images?.common || '';
                    return `<div class="flex justify-between items-center group cursor-pointer hover:bg-white/5 p-2 border-l-2 border-transparent hover:border-secondary transition-all" onclick='openAnimeModal("${title.replace(/"/g, '&quot;')}", "${score}", "${image}", "${item.id}")'><span class="text-gray-400 truncate w-3/4 group-hover:text-white font-bold text-[10px]">${title}</span><span class="text-secondary text-[9px] border border-secondary/30 px-1 font-mono">${score}</span></div>`;
                }).join('');
        };
        async function openAnimeModal(title, rating, imageUrl, id) {
            const modal = document.getElementById('anime-modal');
            document.getElementById('modal-title').innerText = title;
            document.getElementById('modal-rating').innerText = rating;
            document.getElementById('modal-cover').src = imageUrl;
            document.getElementById('modal-id').innerText = id;
            document.getElementById('modal-summary').innerText = "ACCESSING MAGI ARCHIVE...";
            modal.classList.remove('hidden'); modal.classList.add('flex');
            if(id) { try { const res = await fetch(`https://corsproxy.io/?${encodeURIComponent('https://api.bgm.tv/v0/subjects/'+id)}`); const data = await res.json(); document.getElementById('modal-summary').innerText = data.summary || "RESTRICTED DATA."; } catch(e) { document.getElementById('modal-summary').innerText = "CONNECTION LOST."; } }
        }
        function closeAnimeModal() { document.getElementById('anime-modal').classList.add('hidden'); document.getElementById('anime-modal').classList.remove('flex'); }
        function searchArticles() { const query = document.getElementById('search-input').value.toLowerCase(); document.querySelectorAll('.article-card').forEach(card => { const text = card.textContent.toLowerCase(); const tags = card.dataset.tags ? card.dataset.tags.toLowerCase() : ''; card.style.display = (text.includes(query) || tags.includes(query)) ? '' : 'none'; }); }
        function filterByTag(tag) { document.getElementById('search-input').value = tag; searchArticles(); }

        const bootLines = ["NERV OS [VER. 6.66]", "INITIALIZING MAGI...", "> MELCHIOR: CONNECTED.", "> BALTHASAR: CONNECTED.", "> CASPER: CONNECTED.", "LOADING DRIVERS...", "SYSTEM ONLINE."];
        function runBootSequence() {
            const screen = document.getElementById('boot-sequence');
            screen.style.display = 'flex';
            let delay = 0;
            bootLines.forEach((line) => {
                delay += Math.random() * 150 + 50;
                setTimeout(() => {
                    const p = document.createElement('div');
                    p.className = 'boot-line';
                    if(line.includes("CONNECTED")) p.style.color = "var(--secondary-color)";
                    p.innerText = line;
                    screen.appendChild(p);
                }, delay);
            });
            setTimeout(() => { screen.style.opacity = '0'; setTimeout(() => { screen.remove(); }, 1000); }, delay + 1000);
        }

        startHeroGlitch();
        loadAnimeData();
        window.addEventListener('load', runBootSequence);

    </script>
</body>
</html>
