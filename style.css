:root {
            /* --- 默认暗色模式变量 (EVA-01 Dark) --- */
            --mouse-x: 50%; --mouse-y: 50%; --cursor-size: 800px;
            --primary-color: #b15dff; 
            --secondary-color: #39ff14; 
            --bg-color: #0f0518;
            --surface-color: rgba(20, 10, 30, 0.6); 
            --grid-color: rgba(125, 42, 232, 0.15); 
            --lock-color: #ff0055; 
            
            /* 背景渐变 - 暗色 */
            --bg-gradient: radial-gradient(circle at 50% 50%, #2d1b4e 0%, #1a0b2e 45%, #0a0a0a 100%);
            /* 混合模式：暗色背景用 screen (滤色) 让光发亮 */
            --blend-mode: screen;
            --overlay-opacity: 0.18;
            
            /* 文字颜色基准 */
            --text-main: #ffffff;
            --text-muted: #9ca3af;
            --border-color: rgba(255, 255, 255, 0.1);
        }

        /* 自定义音量滑块样式 */
input[type=range] {
    -webkit-appearance: none; /* 移除默认样式 */
    background: transparent;
}
input[type=range]::-webkit-slider-thumb {
    -webkit-appearance: none;
    height: 12px;
    width: 6px;
    background: var(--primary-color);
    border: 1px solid black;
    cursor: pointer;
    margin-top: -4px; /* 对齐轨道 */
    box-shadow: 0 0 5px var(--primary-color);
}
input[type=range]::-webkit-slider-runnable-track {
    width: 100%;
    height: 4px;
    cursor: pointer;
    background: rgba(255,255,255,0.1);
    border-radius: 2px;
}
/* 列表激活样式优化 */
.track-item.active {
    background: var(--primary-color);
    color: black; /* 激活时反色，更显眼 */
    font-weight: bold;
}

        /* --- 音频系统专用样式 --- */
.track-item {
    font-family: 'JetBrains Mono', monospace;
    font-size: 10px;
    color: #666;
    padding: 4px 6px;
    cursor: pointer;
    border-left: 2px solid transparent;
    transition: all 0.2s;
}
.track-item:hover {
    color: white;
    background: rgba(255,255,255,0.05);
}
.track-item.active {
    color: var(--primary-color); /* 继承主题色 */
    border-left-color: var(--primary-color);
    background: rgba(0, 0, 0, 0.3);
}
/* 隐藏滚动条 */
.custom-scrollbar::-webkit-scrollbar { width: 0; }
.custom-scrollbar { scrollbar-width: none; }

/* --- EVA 风格字体模拟 --- */
.eva-font {
    /* 优先使用极粗的黑体 */
    font-family: "Impact", "Arial Black", "PingFang SC", "Microsoft YaHei UI", sans-serif;
    font-weight: 900; /* 最粗 */
    letter-spacing: -0.05em; /* 字间距收紧 */
    text-transform: uppercase;
}

/* 战术切角边框 (用于替换子弹头) */
.tactical-cut {
    clip-path: polygon(
        0 0, 
        100% 0, 
        100% 70%, 
        90% 100%, 
        0 100%
    );
    border-right: 4px solid var(--primary-color); /* 右侧重型边框 */
}

/* --- 音频终端专用样式 (修复亮色模式 & 交互) --- */

/* 1. 亮色模式适配：让面板变白，字变黑 */
[data-mode="light"] #control-deck {
    background: rgba(255, 255, 255, 0.85) !important; /* 磨砂白 */
    border-color: rgba(0, 0, 0, 0.1) !important;
    box-shadow: 0 10px 40px rgba(0, 0, 0, 0.1) !important;
}
[data-mode="light"] #control-deck h3 { color: #000 !important; }
[data-mode="light"] #control-deck .text-white { color: #333 !important; } /* 强制反转白字 */
[data-mode="light"] #control-deck button {
    border-color: rgba(0,0,0,0.2);
    color: #555;
}
[data-mode="light"] #control-deck button:hover {
    background: var(--secondary-color);
    color: #000;
}
/* 列表背景适配 */
[data-mode="light"] #playlist-ui {
    background: rgba(0,0,0,0.03) !important;
    border-color: rgba(0,0,0,0.05);
}

/* 2. 默认圆形按钮适配 */
#terminal-trigger {
    width: 42px; /* 默认宽度 */
    transition: all 0.5s cubic-bezier(0.34, 1.56, 0.64, 1);
}
/* 亮色模式下圆球的背景 */
[data-mode="light"] #terminal-trigger {
    background: rgba(255,255,255,0.9);
    border-color: rgba(0,0,0,0.1);
}

        /* --- EVA 白红美学模式 (Light Mode) --- */
        [data-mode="light"] {
            /* 基础配色：纯白 + 实验室灰 */
            --bg-color: #ffffff;
            --bg-gradient: radial-gradient(circle at 50% 50%, #ffffff 0%, #f2f2f2 60%, #e0e0e0 100%);
            --surface-color: rgba(255, 255, 255, 0.75); /* 毛玻璃变白 */
            
            /* 混合模式：亮色背景用 multiply (正片叠底) 让网格变黑 */
            --blend-mode: multiply; 
            --overlay-opacity: 0.08; /* 亮背景下纹理稍微淡一点 */
            
            /* 文字反转 */
            --text-main: #1a1a1a;
            --text-muted: #4b5563;
            --border-color: rgba(0, 0, 0, 0.1);
            
            /* 网格变为深灰色 */
            --grid-color: rgba(0, 0, 0, 0.1);
        }

        //* --- 亮色模式下的机体配色微调 (修正版) --- */
        /* 核心修复：强制所有机体在亮色模式下背景变量为白，消除顶部黑条 */
        
        /* Unit-01 (Default/Shinji) */
        [data-mode="light"][data-theme="default"] { 
            --primary-color: #7d2ae8; 
            --secondary-color: #00c000;
            --bg-color: #ffffff; /* 确保为白 */
        }
        
        /* Unit-02 (Asuka) - 修正：覆盖原主题的深红背景 */
        [data-mode="light"][data-theme="unit-02"] { 
            --primary-color: #ffae00; 
            --secondary-color: #d90000;
            --bg-color: #ffffff; /* 关键修复 */
            --surface-color: rgba(255, 255, 255, 0.85);
        }
        
        /* Unit-00 (Rei) - 修正：覆盖原主题的深蓝背景 */
        [data-mode="light"][data-theme="unit-00"] { 
            --primary-color: #0056b3; 
            --secondary-color: #0091ff; 
            --bg-color: #ffffff; /* 关键修复 */
            --surface-color: rgba(255, 255, 255, 0.85);
        }
        
        /* Unit-08 (Mari) - 修正：覆盖原主题的深粉背景 */
        [data-mode="light"][data-theme="unit-08"] { 
            --primary-color: #d63384; 
            --secondary-color: #00a846; 
            --bg-color: #ffffff; /* 关键修复 */
            --surface-color: rgba(255, 255, 255, 0.85);
        }

        /* 通用样式 */
        body { 
            background: var(--bg-gradient);
            min-height: 100vh; 
            color: var(--text-main); 
            transition: background 0.5s ease, color 0.3s ease; 
            overflow-x: hidden; 
            cursor: auto;
            -webkit-tap-highlight-color: transparent;
        }

        /* 蜂巢干扰层 */
        .rebuild-overlay {
            position: fixed; top: 0; left: 0; width: 100%; height: 100%; z-index: -1; pointer-events: none;
            background-image: 
                linear-gradient(30deg, var(--grid-color) 12%, transparent 12.5%, transparent 87%, var(--grid-color) 87.5%, var(--grid-color)),
                linear-gradient(150deg, var(--grid-color) 12%, transparent 12.5%, transparent 87%, var(--grid-color) 87.5%, var(--grid-color)),
                linear-gradient(30deg, var(--grid-color) 12%, transparent 12.5%, transparent 87%, var(--grid-color) 87.5%, var(--grid-color)),
                linear-gradient(150deg, var(--grid-color) 12%, transparent 12.5%, transparent 87%, var(--grid-color) 87.5%, var(--grid-color)),
                linear-gradient(60deg, var(--grid-color) 25%, transparent 25.5%, transparent 75%, var(--grid-color) 75%, var(--grid-color)),
                linear-gradient(60deg, var(--grid-color) 25%, transparent 25.5%, transparent 75%, var(--grid-color) 75%, var(--grid-color));
            background-size: 20px 35px;
            background-position: 0 0, 0 0, 10px 18px, 10px 18px, 0 0, 10px 18px;
            opacity: var(--overlay-opacity);
            mix-blend-mode: var(--blend-mode); /* 动态混合模式 */
            transition: mix-blend-mode 0.3s, opacity 0.3s;
        }

        /* 字体发光增强 */
        h1, h2, h3, .eva-header {
            text-shadow: 0 0 10px rgba(var(--secondary-color), 0.4);
        }

        /* --- 战术模式：PC端隐藏系统鼠标 --- */
        @media (hover: hover) and (pointer: fine) {
            body.tactical-mode, 
            body.tactical-mode a, 
            body.tactical-mode button, 
            body.tactical-mode input, 
            body.tactical-mode .cursor-pointer { 
                cursor: none !important; 
            }
            body.tactical-mode #tactical-cursor {
                display: block;
            }
        }

        /* 战术光标容器 */
        #tactical-cursor {
            position: fixed; top: 0; left: 0; z-index: 99999; pointer-events: none;
            display: none;
        }

        .cursor-layer {
            position: fixed; top: 0; left: 0;
            will-change: transform;
            pointer-events: none;
            transition: none !important; 
            transform: translateZ(0);
            backface-visibility: hidden;
        }
        
        .cursor-main { z-index: 100; }
        .cursor-trail-1 { z-index: 99; opacity: 0.6; }
        .cursor-trail-2 { z-index: 98; opacity: 0.3; }

        /* --- EVA 3.0+ 风格光标设计 --- */
        .cursor-wrapper {
            position: relative; display: flex; align-items: center; justify-content: center;
            color: var(--secondary-color);
            transition: color 0.2s ease;
        }

        /* 中心点 */
        .cursor-center { 
            position: absolute; width: 4px; height: 4px; 
            background: currentColor; border-radius: 50%; 
            box-shadow: 0 0 8px currentColor;
        }

        /* 极细十字线 */
        .cursor-cross-v { position: absolute; width: 1px; height: 24px; background: currentColor; opacity: 0.6; }
        .cursor-cross-h { position: absolute; width: 24px; height: 1px; background: currentColor; opacity: 0.6; }

        /* 旋转扫描环 (常态) */
        .cursor-ring { 
            position: absolute; width: 40px; height: 40px; 
            border: 1px dashed currentColor; border-radius: 50%; opacity: 0.3; 
            animation: spin 10s linear infinite;
            transition: all 0.3s ease;
        }

        /* 锁定括号 (EVA HUD Brackets) */
        .cursor-bracket {
            position: absolute; width: 12px; height: 12px;
            border: 2px solid currentColor; opacity: 0.8;
            transition: all 0.2s cubic-bezier(0.34, 1.56, 0.64, 1); /* 弹跳效果 */
        }
        .cb-tl { top: -16px; left: -16px; border-right: 0; border-bottom: 0; }
        .cb-tr { top: -16px; right: -16px; border-left: 0; border-bottom: 0; }
        .cb-bl { bottom: -16px; left: -16px; border-right: 0; border-top: 0; }
        .cb-br { bottom: -16px; right: -16px; border-left: 0; border-top: 0; }

        /* 战术文字 */
        .cursor-info-wrapper {
            position: absolute; top: 20px; left: 24px;
            font-family: 'JetBrains Mono'; font-size: 9px; font-weight: 700;
            display: flex; flex-direction: column;
            gap: 2px; opacity: 0.8;
            text-shadow: 1px 1px 0 rgba(0,0,0,0.8);
        }
        .cursor-mode { font-size: 7px; opacity: 0.7; letter-spacing: 1px; }

        /* --- 锁定状态 (LOCK-ON) 动效 --- */
        body.hovering #tactical-cursor .cursor-wrapper { 
            color: var(--lock-color); 
        }

        /* 锁定瞬间括号收缩 (Snap In) */
        body.hovering .cursor-bracket {
            border-width: 3px;
            opacity: 1;
            box-shadow: 0 0 10px var(--lock-color);
        }
        body.hovering .cb-tl { transform: translate(8px, 8px); }
        body.hovering .cb-tr { transform: translate(-8px, 8px); }
        body.hovering .cb-bl { transform: translate(8px, -8px); }
        body.hovering .cb-br { transform: translate(-8px, -8px); }

        /* 外部环加速旋转并变实 */
        body.hovering .cursor-ring {
            width: 50px; height: 50px;
            border-style: solid; border-width: 1px;
            border-color: transparent;
            border-top-color: var(--lock-color);
            border-bottom-color: var(--lock-color);
            animation: spin 1s linear infinite;
            opacity: 0.8;
        }

        /* 十字线消失 */
        body.hovering .cursor-cross-v, body.hovering .cursor-cross-h {
            opacity: 0; height: 0; width: 0;
        }

        /* 拖尾特化样式 (仅显示轮廓) */
        .cursor-trail-1 .cursor-bracket, .cursor-trail-1 .cursor-ring, .cursor-trail-1 .cursor-cross-v, .cursor-trail-1 .cursor-cross-h { display: none; }
        .cursor-trail-1 .cursor-center { 
            width: 30px; height: 30px; background: transparent; 
            border: 1px dotted currentColor; box-shadow: none;
        }
        .cursor-trail-2 .cursor-center { display: none; }

        /* 点击反馈 */
        .click-ripple {
            position: absolute; top: 50%; left: 50%; transform: translate(-50%, -50%);
            width: 10px; height: 10px; border: 2px solid var(--secondary-color);
            border-radius: 50%; pointer-events: none; opacity: 1;
            animation: ripple-effect 0.5s cubic-bezier(0.4, 0, 0.2, 1) forwards;
        }

        @keyframes spin { 0% { transform: rotate(0deg); } 100% { transform: rotate(360deg); } }
        @keyframes ripple-effect { 0% { width: 10px; height: 10px; opacity: 1; border-width: 2px; } 100% { width: 100px; height: 100px; opacity: 0; border-width: 0px; } }

        /* --- 社交按钮优化 --- */
        .social-btn {
            position: relative;
            overflow: hidden;
            transition: all 0.3s cubic-bezier(0.4, 0, 0.2, 1);
            touch-action: manipulation;
        }
        .social-btn:hover {
            border-color: var(--secondary-color);
            box-shadow: 0 0 15px rgba(var(--secondary-color), 0.3);
        }
        .social-text {
            transition: transform 0.3s ease, opacity: 0.2s;
        }
        @media (hover: hover) {
            .social-btn:hover .social-text {
                transform: translateY(-150%);
                opacity: 0;
            }
            .social-btn:hover .social-icon-container {
                opacity: 1;
                transform: scale(1);
                animation: icon-glitch 0.4s cubic-bezier(0.175, 0.885, 0.32, 1.275);
            }
            .social-btn:hover .social-shutter {
                transform: scaleY(1);
            }
        }
        
        .social-icon-container {
            position: absolute;
            inset: 0;
            display: flex;
            align-items: center;
            justify-content: center;
            opacity: 0;
            transform: scale(0.8);
            transition: all 0.3s ease;
        }
        .social-shutter {
            position: absolute; top: 0; left: 0; width: 100%; height: 100%;
            background: var(--secondary-color);
            transform: scaleY(0); transform-origin: bottom;
            transition: transform 0.3s cubic-bezier(0.4, 0, 0.2, 1);
            opacity: 0.1; pointer-events: none;
        }

        /* Toggle Switch Style */
        .tactical-switch {
            display: flex; align-items: center; gap: 8px;
            font-family: 'JetBrains Mono'; font-size: 10px;
            cursor: pointer; select-none: none;
            padding: 4px 8px; border: 1px solid var(--border-color);
            transition: all 0.3s;
        }
        [data-mode="light"] .tactical-switch { border-color: rgba(0,0,0,0.2); color: #333; }
        [data-mode="light"] .tactical-switch:hover { border-color: #000; }

        @media (hover: none) {
            .tactical-switch { display: none; }
        }

        .tactical-switch:hover { border-color: var(--text-main); }
        .switch-box {
            width: 12px; height: 12px; border: 1px solid currentColor;
            display: flex; align-items: center; justify-content: center;
        }
        .switch-box-inner {
            width: 6px; height: 6px; background: var(--secondary-color);
            opacity: 0; transition: opacity 0.2s;
        }
        body.tactical-mode .switch-box-inner { opacity: 1; }
        body.tactical-mode .tactical-switch { 
            color: var(--secondary-color); border-color: var(--secondary-color); 
            text-shadow: 0 0 5px rgba(var(--secondary-color), 0.5);
        }

        /* LCL Mode Switch specific styles */
        body.lcl-mode .switch-box-inner-lcl { opacity: 1; }
        body.lcl-mode .tactical-switch-lcl {
            color: #ffa500; border-color: #ffa500;
            text-shadow: 0 0 5px rgba(255, 165, 0, 0.5);
        }
        .switch-box-inner-lcl {
            width: 6px; height: 6px; background: #ffa500;
            opacity: 0; transition: opacity 0.2s;
        }

        /* Existing styles... */
        [data-theme="unit-02"] { --primary-color: #ffae00; --secondary-color: #ff0000; --bg-color: #140202; --surface-color: rgba(40, 10, 10, 0.6); --grid-color: rgba(255, 0, 0, 0.15); --lock-color: #ffae00; }
        [data-theme="unit-00"] { --primary-color: #ffffff; --secondary-color: #0091ff; --bg-color: #020a14; --surface-color: rgba(10, 20, 40, 0.6); --grid-color: rgba(0, 145, 255, 0.15); --lock-color: #ffffff; }
        [data-theme="unit-08"] { --primary-color: #ff5cab; --secondary-color: #50c878; --bg-color: #14020d; --surface-color: rgba(40, 10, 30, 0.6); --grid-color: rgba(255, 0, 153, 0.15); --lock-color: #ff5cab; }
        
        /* Cleaned up emergency styles */
        
        #matrix-bg { position: fixed; top: 0; left: 0; width: 100%; height: 100%; z-index: -3; opacity: 0.15; pointer-events: none; transition: opacity 0.5s; }
        body.lcl-mode #matrix-bg { opacity: 0; } /* Hide matrix rain when LCL is on */

        /* LCL Canvas Style */
        #lcl-bg {
            position: fixed; top: 0; left: 0; width: 100%; height: 100%; z-index: -3; opacity: 0; pointer-events: none;
            transition: opacity 1s ease;
        }
        body.lcl-mode #lcl-bg { opacity: 1; }
        
        /* Hex BG 增强：更高的对比度和全息感 */
        .hex-bg { 
            position: fixed; top: 0; left: 0; width: 100%; height: 100%; pointer-events: none; z-index: -2; 
            background-image: url("data:image/svg+xml,%3Csvg width='60' height='104' viewBox='0 0 60 104' xmlns='http://www.w3.org/2000/svg'%3E%3Cpath d='M30 0l30 17.32v34.64L30 69.28 0 51.96V17.32L30 0z' fill='none' stroke='%23ffffff' stroke-opacity='0.12' stroke-width='1'/%3E%3C/svg%3E"); 
            background-size: 60px 104px; 
            mask-image: linear-gradient(to bottom, black 20%, transparent 90%); 
            animation: bg-scroll 60s linear infinite; 
            transition: background-image 0.3s;
            opacity: 0.5; /* 微调亮度 0.4 - 0.5 */
            filter: drop-shadow(0 0 2px var(--grid-color));
            mix-blend-mode: var(--blend-mode); /* 随主题变化 */
        }
        [data-mode="light"] .hex-bg { background-image: url("data:image/svg+xml,%3Csvg width='60' height='104' viewBox='0 0 60 104' xmlns='http://www.w3.org/2000/svg'%3E%3Cpath d='M30 0l30 17.32v34.64L30 69.28 0 51.96V17.32L30 0z' fill='none' stroke='%23000000' stroke-opacity='0.12' stroke-width='1'/%3E%3C/svg%3E"); }

        @keyframes bg-scroll { 0% { background-position: 0 0; } 100% { background-position: 60px 104px; } }
        .hex-flash { position: absolute; width: 60px; height: 104px; background: var(--secondary-color); clip-path: polygon(50% 0%, 100% 25%, 100% 75%, 50% 100%, 0% 75%, 0% 25%); opacity: 0; animation: hexFlash 4s infinite; box-shadow: 0 0 20px var(--secondary-color); }
        @keyframes hexFlash { 0%, 90% { opacity: 0; } 92% { opacity: 0.3; } 94% { opacity: 0; } }
        
        #particles-container { position: fixed; inset: 0; pointer-events: none; z-index: -1; overflow: hidden; perspective: 1000px; transition: opacity 0.5s; }
        body.lcl-mode #particles-container { opacity: 0; } /* Hide green particles in LCL mode */

        .particle { position: absolute; background: var(--secondary-color); opacity: 0; bottom: -50px; transition: background-color: 0.3s; }
        .particle.bubble { border-radius: 50%; box-shadow: 0 0 8px var(--secondary-color); }
        .particle.bit { height: 1px !important; box-shadow: 0 0 4px var(--secondary-color); }
        @keyframes floatUp { 0% { transform: translateY(0) scale(var(--p-scale)); opacity: 0; } 15% { opacity: var(--p-opacity); } 85% { opacity: var(--p-opacity); } 100% { transform: translateY(-120vh) scale(var(--p-scale)); opacity: 0; } }

        .scan-bar { 
            position: fixed; top: -10%; left: 0; width: 100%; height: 20px; 
            background: linear-gradient(to bottom, transparent, var(--secondary-color), transparent); 
            opacity: 0; 
            box-shadow: 0 0 40px var(--secondary-color); 
            z-index: 40; 
            pointer-events: none; 
            animation: scanDown 60s linear infinite; /* 这里从 10s 改为 60s */
        }
        @keyframes scanDown { 
            0% { top: -10%; opacity: 0; } 
            0.1% { opacity: 0.4; }            /* 开始瞬间显示 */
            5% { top: 110%; opacity: 0.4; }   /* 在 5% 的时间点(约3秒)扫到底部 */
            5.1% { top: 110%; opacity: 0; }   /* 到底后立即隐藏 */
            100% { top: 110%; opacity: 0; }   /* 剩下的 95% 时间保持隐藏，直到60s结束 */
        }
        .cockpit-overlay { position: fixed; inset: 0; pointer-events: none; z-index: 90; background: radial-gradient(circle at center, transparent 95%, rgba(0,0,0,0.4) 100%); box-shadow: inset 0 0 50px rgba(0,0,0,0.4); mix-blend-mode: multiply; }
        [data-mode="light"] .cockpit-overlay { background: radial-gradient(circle at center, transparent 55%, rgba(255,255,255,0.8) 100%); box-shadow: none; }

        .cockpit-reticle { position: fixed; top: 50%; left: 50%; transform: translate(-50%, -50%); width: 700px; height: 700px; border: 1px dashed var(--secondary-color); border-radius: 50%; opacity: 0.08; pointer-events: none; z-index: -1; animation: spin-slower 120s linear infinite; transition: border-color 0.3s; }
        /* 手机端优化：隐藏过于复杂的座舱装饰，减少视觉干扰 */
        @media (max-width: 768px) {
            .cockpit-reticle { display: none; }
            .cockpit-side-meter { display: none; }
        }
        
        .cockpit-side-meter { position: fixed; top: 20%; bottom: 20%; width: 4px; z-index: 80; pointer-events: none; background: linear-gradient(to bottom, transparent, var(--secondary-color), transparent); opacity: 0.25; transition: background 0.3s; }
        .meter-left { left: 40px; } .meter-right { right: 40px; }
        
        #cursor-glow { position: fixed; top: 0; left: 0; width: 100%; height: 100%; pointer-events: none; z-index: -1; background-image: radial-gradient(circle var(--cursor-size) at var(--mouse-x) var(--mouse-y), var(--grid-color) 0%, transparent 60%); transition: --cursor-size 0.1s ease; will-change: background-image; mix-blend-mode: screen; }
        
        .hero-character-container { position: fixed; right: -5%; top: 0; bottom: 0; z-index: 0; width: 60vw; max-width: 1000px; height: 100vh; display: flex; align-items: flex-start; justify-content: flex-end; pointer-events: none; overflow: hidden; mix-blend-mode: screen; }
        [data-mode="light"] .hero-character-container { mix-blend-mode: multiply; opacity: 0.8; }
        .hero-character-image { width: 100%; height: 100%; object-fit: cover; object-position: center top; filter: brightness(0.8) contrast(1.1); opacity: 0.9; will-change: transform, opacity, clip-path, filter; transition: opacity 0.5s ease; }
        
        @keyframes cyberSwap { 
            0% { opacity: 1; transform: translateX(0) skewX(0deg); filter: hue-rotate(0deg); clip-path: inset(0 0 0 0); } 
            5% { opacity: 0.8; transform: translateX(-10px) skewX(20deg); filter: hue-rotate(90deg) contrast(2); clip-path: inset(10% 0 60% 0); } 
            10% { opacity: 0.9; transform: translateX(10px) skewX(-10deg); filter: hue-rotate(-90deg) contrast(1.5); clip-path: inset(40% 0 40% 0); } 
            15% { opacity: 0.4; transform: translateX(-5px) skewX(5deg); filter: hue-rotate(180deg); clip-path: inset(80% 0 5% 0); } 
            20% { opacity: 0.9; transform: translateX(0) skewX(0deg); filter: hue-rotate(0deg); clip-path: none; } 
            100% { opacity: 1; transform: translateX(0) skewX(0deg); filter: hue-rotate(0deg); } 
        }
        .cyber-swap-active { animation: cyberSwap 0.5s steps(3) forwards; }
        
        .eva-card {
            background: var(--surface-color);
            backdrop-filter: blur(10px);
            border: 1px solid var(--border-color);
            border-left: 2px solid var(--secondary-color);
            position: relative;
            transition: box-shadow 0.3s ease, border-color 0.3s ease, transform 0.2s ease; 
            clip-path: polygon(10px 0, 100% 0, 100% calc(100% - 10px), calc(100% - 10px) 100%, 0 100%, 0 10px);
        }
        .eva-glare {
            position: absolute; inset: 0;
            background: radial-gradient(circle at var(--mouse-x) var(--mouse-y), rgba(255,255,255,0.3) 0%, transparent 60%);
            pointer-events: none; opacity: 0; transition: opacity 0.3s;
            mix-blend-mode: overlay;
            z-index: 20;
        }
        /* 只有在支持 hover 的设备上启用反光和位移，手机端禁用以节省性能 */
        @media (hover: hover) {
            .eva-card:hover .eva-glare { opacity: 1; }
            .eva-card:hover {
                box-shadow: 0 10px 40px rgba(var(--secondary-color), 0.2), inset 0 0 20px rgba(var(--secondary-color), 0.1);
                border-color: rgba(255,255,255,0.4);
                z-index: 10;
                transform: translateY(-5px);
            }
            .eva-card:hover::before { width: 30px; height: 30px; }
            .eva-card:hover::after { width: 30px; height: 30px; }
        }

        .eva-card::before { content: ''; position: absolute; top: 0; right: 0; width: 15px; height: 15px; border-top: 2px solid var(--secondary-color); border-right: 2px solid var(--secondary-color); opacity: 0.8; box-shadow: 2px -2px 8px var(--secondary-color); transition: all 0.3s; }
        .eva-card::after { content: ''; position: absolute; bottom: 0; left: 0; width: 15px; height: 15px; border-bottom: 2px solid var(--secondary-color); border-left: 2px solid var(--secondary-color); opacity: 0.8; box-shadow: -2px 2px 8px var(--secondary-color); transition: all 0.3s; }

        .glitch-text { position: relative; display: inline-block; }
        .glitch-text::before, .glitch-text::after { content: attr(data-text); position: absolute; top: 0; left: 0; width: 100%; height: 100%; opacity: 0.8; }
        .glitch-text::before { color: #0ff; z-index: -1; clip-path: polygon(0 0, 100% 0, 100% 45%, 0 45%); animation: glitch-anim-1 2s infinite linear alternate-reverse; transform: translate(-2px); }
        .glitch-text::after { color: #f0f; z-index: -2; clip-path: polygon(0 55%, 100% 55%, 100% 100%, 0 100%); animation: glitch-anim-2 2s infinite linear alternate-reverse; transform: translate(2px); }
        @keyframes glitch-anim-1 { 0% { clip-path: inset(20% 0 80% 0); } 20% { clip-path: inset(60% 0 10% 0); } 40% { clip-path: inset(40% 0 50% 0); } 60% { clip-path: inset(80% 0 5% 0); } 80% { clip-path: inset(10% 0 70% 0); } 100% { clip-path: inset(30% 0 20% 0); } }
        @keyframes glitch-anim-2 { 0% { clip-path: inset(10% 0 60% 0); } 20% { clip-path: inset(30% 0 20% 0); } 40% { clip-path: inset(70% 0 10% 0); } 60% { clip-path: inset(20% 0 50% 0); } 80% { clip-path: inset(60% 0 30% 0); } 100% { clip-path: inset(50% 0 40% 0); } }

        .typing-cursor::after { content: '_'; animation: blink 1s step-end infinite; color: var(--secondary-color); }
        @keyframes blink { 0%, 100% { opacity: 1; } 50% { opacity: 0; } }

        .eva-header { display: flex; justify-content: space-between; align-items: center; border-bottom: 1px solid var(--border-color); padding-bottom: 8px; margin-bottom: 16px; font-family: 'JetBrains Mono'; font-size: 11px; letter-spacing: 0.1em; color: var(--secondary-color); text-shadow: 0 0 5px var(--secondary-color); }
        .eva-header-deco { width: 4px; height: 4px; background: var(--primary-color); margin-right: 6px; box-shadow: 0 0 5px var(--primary-color); }
        .magi-font { font-family: 'Space Grotesk', sans-serif; font-weight: 900; letter-spacing: -0.05em; text-shadow: 2px 2px 0px rgba(0,0,0,0.5); }
        
        .bottom-bar-container { position: fixed; bottom: 0; left: 0; width: 100%; height: 48px; z-index: 900; pointer-events: none; }
        .holo-status-bar { position: absolute; inset: 0; display: flex; align-items: center; justify-content: space-between; background: linear-gradient(to top, rgba(0,0,0,0.95) 0%, rgba(0,0,0,0.5) 70%, transparent 100%); border-bottom: 1px solid rgba(var(--secondary-color), 0.5); border-top: 1px solid rgba(var(--secondary-color), 0.1); backdrop-filter: blur(4px); mask-image: linear-gradient(to right, transparent 0%, black 10%, black 90%, transparent 100%); -webkit-mask-image: linear-gradient(to right, transparent 0%, black 10%, black 90%, transparent 100%); overflow: hidden; }
        [data-mode="light"] .holo-status-bar { background: linear-gradient(to top, rgba(255,255,255,0.95) 0%, rgba(255,255,255,0.5) 70%, transparent 100%); mask-image: none; -webkit-mask-image: none; border-top: 1px solid var(--border-color); border-bottom: 1px solid var(--secondary-color); }

        .holo-scanner { position: absolute; top: 0; left: -100%; width: 20%; height: 100%; background: linear-gradient(to right, transparent, rgba(255,255,255,0.1), transparent); transform: skewX(-20deg); animation: scanner-beam 5s cubic-bezier(0.4, 0, 0.2, 1) infinite; pointer-events: none; z-index: 5; }
        .holo-wave-canvas { position: absolute; bottom: 0; left: 0; width: 100%; height: 100%; z-index: -1; opacity: 0.3; mix-blend-mode: screen; }
        .holo-segment { display: flex; align-items: center; gap: 12px; padding: 0 40px; font-family: 'JetBrains Mono', monospace; font-size: 10px; color: var(--secondary-color); text-shadow: 0 0 5px var(--secondary-color); z-index: 10; background: rgba(0,0,0,0.3); height: 100%; }
        [data-mode="light"] .holo-segment { background: rgba(255,255,255,0.3); }
        
        .holo-label { opacity: 0.7; margin-right: 4px; letter-spacing: 1px; }
        .holo-val { font-weight: bold; color: #fff; text-shadow: 0 0 8px var(--primary-color); }
        [data-mode="light"] .holo-val { color: #000; }

        .holo-marquee-container { flex: 1; overflow: hidden; position: relative; height: 100%; display: flex; align-items: center; background: rgba(0, 0, 0, 0.2); background-image: linear-gradient(var(--grid-color) 1px, transparent 1px), linear-gradient(90deg, var(--grid-color) 1px, transparent 1px); background-size: 20px 20px; box-shadow: inset 0 0 20px rgba(0,0,0,0.8); }
        [data-mode="light"] .holo-marquee-container { background: rgba(255, 255, 255, 0.2); box-shadow: inset 0 0 20px rgba(0,0,0,0.1); }

        .holo-marquee-wrapper { display: flex; white-space: nowrap; position: absolute; left: 0; animation: scrollText 60s linear infinite; }
        .holo-marquee-item { display: inline-flex; align-items: center; font-family: 'Space Grotesk', sans-serif; font-weight: 700; letter-spacing: 0.15em; font-size: 11px; color: rgba(255,255,255,0.85); padding-right: 4rem; }
        [data-mode="light"] .holo-marquee-item { color: rgba(0,0,0,0.85); }

        @keyframes scrollText { 0% { transform: translateX(0); } 100% { transform: translateX(-50%); } }
        .holo-hex-deco { width: 8px; height: 8px; background: var(--secondary-color); clip-path: polygon(50% 0%, 100% 25%, 100% 75%, 50% 100%, 0% 75%, 0% 25%); animation: flash 2s infinite; }

        .theme-btn { width: 30px; height: 6px; transform: skewX(-30deg); cursor: pointer; border: 1px solid rgba(255,255,255,0.3); transition: all 0.3s; margin-right: 4px; }
        .theme-btn.active { border-color: white; box-shadow: 0 0 15px currentColor; background-color: currentColor !important; }
        .hud-corner { position: fixed; width: 40px; height: 40px; border: 2px solid var(--secondary-color); z-index: 50; pointer-events: none; opacity: 0.7; box-shadow: 0 0 10px var(--secondary-color); } 
        .hud-tl { top: 20px; left: 20px; border-right: 0; border-bottom: 0; } .hud-tr { top: 20px; right: 20px; border-left: 0; border-bottom: 0; } .hud-bl { bottom: 20px; left: 20px; border-right: 0; border-top: 0; } .hud-br { bottom: 20px; right: 20px; border-left: 0; border-top: 0; }
        
        /* CRT 扫描线增强 */
        .crt-overlay { 
            position: fixed; top: 0; left: 0; width: 100vw; height: 100vh; z-index: 9999; pointer-events: none; 
            background: linear-gradient(rgba(18, 16, 16, 0) 50%, rgba(0, 0, 0, 0.1) 50%), linear-gradient(90deg, rgba(255, 0, 0, 0.03), rgba(0, 255, 0, 0.01), rgba(0, 0, 255, 0.03)); 
            background-size: 100% 2px, 3px 100%; 
            opacity: 0.6; 
            mix-blend-mode: overlay; 
            box-shadow: inset 0 0 100px rgba(0,0,0,0.9); 
        }
        [data-mode="light"] .crt-overlay {
            background: linear-gradient(rgba(255, 255, 255, 0) 50%, rgba(0, 0, 0, 0.05) 50%), linear-gradient(90deg, rgba(0, 0, 0, 0.02), rgba(0, 0, 0, 0.01), rgba(0, 0, 0, 0.02));
            background-size: 100% 2px, 3px 100%;
            opacity: 0.3;
            mix-blend-mode: multiply;
            box-shadow: inset 0 0 100px rgba(0,0,0,0.1);
        }
        
        /* --- AI 助手视觉修复 (针对亮色模式) --- */
        [data-mode="light"] .ai-avatar-img {
            mix-blend-mode: normal !important; /* 取消滤色混合，否则在白底上会消失 */
            filter: brightness(1.05) contrast(1.05) drop-shadow(0 5px 15px rgba(0,0,0,0.15)) !important; /* 增加阴影提升立体感 */
            opacity: 1 !important;
        }
        /* 调整亮色模式下 AI 卡片图片容器背景，避免过于苍白 */
        [data-mode="light"] .ai-card-container .overflow-hidden.bg-black\/40 {
            background-color: rgba(240, 240, 240, 0.8) !important;
        }

        /* Speaking State */
        .ai-card-container.is-speaking {
            border-color: var(--primary-color);
            box-shadow: 0 0 20px var(--primary-color), inset 0 0 10px var(--primary-color);
            animation: speaking-pulse 0.5s ease-in-out infinite alternate;
        }

        .ai-card-container.is-speaking .ai-avatar-img {
            filter: grayscale(0) contrast(1.2) brightness(1.1) !important;
            opacity: 1 !important;
            mix-blend-mode: normal !important; /* Ensure colors are seen */
            animation: speakingShake 0.5s infinite;
        }

        @keyframes speaking-pulse {
            0% { box-shadow: 0 0 15px var(--primary-color); border-color: var(--primary-color); }
            100% { box-shadow: 0 0 30px var(--primary-color), 0 0 50px var(--secondary-color); border-color: var(--secondary-color); }
        }

        /* --- MAGI SYSTEM VISUALIZER REBUILD [Evangelion 3.0+1.0 Style] --- */

        /* 容器布局优化：宽距撑满 */
        .magi-hex-container {
            display: flex;
            align-items: center;
            justify-content: space-between; /* 确保撑满两端 */
            gap: 6px; /* 间隙微调 */
            width: 100%; /* 强制占满宽度 */
            margin-bottom: 12px;
            perspective: 1000px;
        }

        /* 节点基础样式：自适应宽度 */
        .magi-hex {
            position: relative;
            flex: 1; /* 核心：自动伸缩填充 */
            height: 38px; /* 稍微增高以容纳大号汉字 */
            background: rgba(0, 0, 0, 0.8);
            border: 1px solid var(--secondary-color);
            /* 还原 Rebuild 风格的倒角矩形 */
            clip-path: polygon(0 0, 100% 0, 100% 70%, 85% 100%, 0 100%); 
            display: flex;
            flex-direction: column;
            justify-content: center;
            align-items: center;
            overflow: hidden;
            transition: all 0.2s cubic-bezier(0.25, 0.46, 0.45, 0.94);
        }

        /* 节点内的文字排版 - 初始状态 */
        .magi-node-name {
            font-family: 'JetBrains Mono', monospace;
            font-size: 8px; /* 稍微调大初始字号 */
            font-weight: 800;
            line-height: 1;
            z-index: 2;
            color: var(--secondary-color);
            transition: all 0.3s cubic-bezier(0.4, 0, 0.2, 1);
        }

        .magi-node-status {
            font-family: 'Noto Sans JP', sans-serif; /* 强制使用日文字体 */
            font-size: 9px;
            font-weight: 700;
            margin-top: 2px;
            z-index: 2;
            opacity: 0.9;
            color: var(--secondary-color);
            transition: all 0.2s cubic-bezier(0.175, 0.885, 0.32, 1.275); /* 弹性动画 */
        }

        /* 背景扫描线纹理 */
        .magi-hex::before {
            content: '';
            position: absolute;
            inset: 0;
            background: repeating-linear-gradient(
                0deg,
                transparent 0px,
                rgba(57, 255, 20, 0.1) 1px, 
                transparent 2px
            );
            z-index: 0;
            opacity: 0.5;
            pointer-events: none;
        }

        /* --- 状态：思考中 (High-Speed Polling) --- */
        .magi-hex.thinking {
            background: rgba(0, 0, 0, 0.9);
            border-color: rgba(255, 174, 0, 0.3);
        }

        /* --- 新增：轮询激活态 (Polling Highlight) - REBUILD SCHEME --- */
        .magi-hex.polling {
            transform: scale(1.05);
            z-index: 20;
            background: #000 !important; /* 黑色背景突出光效 */
        }

        /* Melchior - 科学家 - 逻辑冷青 (Cyan) */
        #node-melchior.polling {
            border-color: #00ccff !important;
            box-shadow: 0 0 15px rgba(0, 204, 255, 0.6), inset 0 0 10px rgba(0, 204, 255, 0.3);
        }
        #node-melchior.polling .magi-node-name,
        #node-melchior.polling .magi-node-status {
            color: #00ccff !important;
            text-shadow: 0 0 8px #00ccff;
        }

        /* Balthasar - 母亲 - 经典琥珀橙 (Orange) */
        #node-balthasar.polling {
            border-color: #ffae00 !important;
            box-shadow: 0 0 15px rgba(255, 174, 0, 0.6), inset 0 0 10px rgba(255, 174, 0, 0.3);
        }
        #node-balthasar.polling .magi-node-name,
        #node-balthasar.polling .magi-node-status {
            color: #ffae00 !important;
            text-shadow: 0 0 8px #ffae00;
        }

        /* Casper - 女人 - 偏执洋红 (Magenta) */
        #node-casper.polling {
            border-color: #ff0055 !important;
            box-shadow: 0 0 15px rgba(255, 0, 85, 0.6), inset 0 0 10px rgba(255, 0, 85, 0.3);
        }
        #node-casper.polling .magi-node-name,
        #node-casper.polling .magi-node-status {
            color: #ff0055 !important;
            text-shadow: 0 0 8px #ff0055;
        }
        
        /* 覆盖原来的通用样式，避免文字模糊 */
        .magi-hex.polling .magi-node-name { text-shadow: none; }

        /* --- 状态：决议一致 (Consensus) - 核心修改：巨大化汉字 --- */
        .magi-hex.active {
            background: var(--secondary-color);
            border-color: var(--secondary-color);
            box-shadow: 0 0 30px var(--secondary-color); /* 强光晕 */
            transform: scale(1.1); /* 整体放大 */
            z-index: 100;
        }
        
        /* 决议通过时，缩小节点名称，为大汉字让路 */
        .magi-hex.active .magi-node-name {
            color: #000;
            font-size: 5px; /* 极小化 */
            opacity: 0.7;
            margin-bottom: -4px; /* 上移 */
        }
        
        /* 决议通过时，巨大化状态汉字 */
        .magi-hex.active .magi-node-status {
            color: #000; /* 反白显示 */
            text-shadow: none;
            font-size: 18px !important; /* 巨大化 */
            font-weight: 900 !important;
            letter-spacing: 0.05em;
            line-height: 1.1;
            transform: scaleY(1.1); /* 纵向拉伸，更有冲击力 */
        }

        /* --- 状态：否决 (Denied) --- */
        .magi-hex.denied {
            background: #ff0000;
            border-color: #ff0000;
            box-shadow: 0 0 30px rgba(255, 0, 0, 0.8);
            animation: rejection-shake 0.4s ease-in-out;
            transform: scale(1.1);
            z-index: 100;
        }
        
        .magi-hex.denied .magi-node-name {
            color: #fff;
            font-size: 5px; /* 极小化 */
            opacity: 0.7;
            margin-bottom: -4px;
        }
        
        .magi-hex.denied .magi-node-status {
            color: #fff;
            font-size: 18px !important; /* 巨大化 */
            font-weight: 900 !important;
            letter-spacing: 0.05em;
            line-height: 1.1;
            transform: scaleY(1.1);
        }
        
        /* 移除旧的数据流遮罩，保持画面干净 */
        .magi-hex.thinking::after { display: none; }

        /* 亮色模式适配 */
        [data-mode="light"] .magi-hex {
            background: rgba(255, 255, 255, 0.9);
            border-color: #000;
        }
        [data-mode="light"] .magi-node-name { color: #000; }
        [data-mode="light"] .magi-hex.thinking {
            background: #fff;
            border-color: #ffae00;
        }

        /* --- Sync Rate Waveform Canvas --- */
        #sync-wave-canvas {
            position: absolute;
            bottom: 0;
            left: 0;
            width: 100%;
            height: 120px; /* Cover lower part of avatar */
            pointer-events: none;
            z-index: 5;
            mix-blend-mode: screen; /* Holographic overlay effect */
            opacity: 0.8;
            transition: opacity 0.3s;
        }
        [data-mode="light"] #sync-wave-canvas {
            mix-blend-mode: multiply; /* Darker waves on light bg */
            opacity: 0.6;
        }


        ::-webkit-scrollbar { width: 4px; }
        ::-webkit-scrollbar-track { background: var(--bg-color); }
        ::-webkit-scrollbar-thumb { background: var(--secondary-color); border-radius: 2px; }

        .holo-card-3d {
            transition: transform 0.1s cubic-bezier(0.25, 0.46, 0.45, 0.94);
            transform-style: preserve-3d;
            will-change: transform;
        }
        .holo-card-3d .eva-header, 
        .holo-card-3d h3, 
        .holo-card-3d p, 
        .holo-card-3d .social-btn,
        .holo-card-3d button {
            transform: translateZ(20px);
            transform-style: preserve-3d;
        }
        .holo-card-3d .eva-glare {
            transform: translateZ(1px); 
        }

        .scramble-text {
            display: inline-block;
            min-width: 1em;
        }

        /* --- 全息投影效果 (Holographic Effect) --- */
        .holo-container {
            position: relative;
            overflow: hidden;
            background: rgba(0, 20, 0, 0.2); /* 略微深绿底色 */
        }
        
        /* 青色扫描线覆盖层 */
        .holo-overlay {
            position: absolute;
            top: 0; left: 0; right: 0; bottom: 0;
            z-index: 10;
            pointer-events: none;
            background: 
                repeating-linear-gradient(
                    0deg,
                    transparent 0px,
                    rgba(0, 255, 255, 0.05) 1px,
                    transparent 2px
                ),
                linear-gradient(to bottom, rgba(0, 255, 255, 0.0) 50%, rgba(0, 255, 255, 0.05) 50%);
            background-size: 100% 4px, 100% 6px; /* 两种不同频率的扫描 */
            box-shadow: inset 0 0 10px rgba(0,0,0,0.3); /* 边缘暗角 */
            mix-blend-mode: overlay;
        }

        /* RGB 色散错位动画效果 - 应用于图片 */
        .holo-glitch-effect {
            animation: hologram-flicker 4s infinite;
        }
        
        /* 呼吸闪烁 */
        .holo-breathing {
            animation: magiPulse 4s ease-in-out infinite;
        }

        /* 暴怒模式下的红色警告覆盖 */
        .rage-overlay {
            position: absolute; inset: 0;
            background: repeating-linear-gradient(45deg, rgba(255,0,0,0.1), rgba(255,0,0,0.1) 10px, transparent 10px, transparent 20px);
            z-index: 20; pointer-events: none;
            animation: red-alert 0.5s infinite;
            display: none;
        }
        .rage-mode .rage-overlay { display: block; }
        .rage-mode .holo-overlay { background: repeating-linear-gradient(0deg, transparent 0px, rgba(255, 0, 0, 0.1) 1px, transparent 2px); }

        /* --- EVA Day Selector & New List Animations --- */
        /* UPGRADED: Monolith Sound Only Style Buttons */
        .day-btn {
            font-family: 'JetBrains Mono';
            font-size: 10px;
            font-weight: 800;
            padding: 8px 12px;
            border: 1px solid var(--border-color);
            color: var(--text-muted);
            transition: all 0.2s cubic-bezier(0.4, 0, 0.2, 1);
            background: rgba(0,0,0,0.4);
            cursor: pointer;
            margin-right: 2px;
            flex-shrink: 0;
            text-align: center;
            position: relative;
            overflow: hidden;
            clip-path: polygon(0 0, 100% 0, 100% 90%, 90% 100%, 0 100%);
        }
        .day-btn:hover {
            border-color: var(--secondary-color);
            color: var(--secondary-color);
            box-shadow: inset 0 0 10px rgba(var(--secondary-color), 0.2);
        }
        .day-btn.active {
            background: var(--secondary-color);
            color: #000;
            border-color: var(--secondary-color);
            text-shadow: none;
            box-shadow: 0 0 15px rgba(var(--secondary-color), 0.5);
            transform: translateY(-2px);
            z-index: 10;
        }
        /* Active indicator for buttons */
        .day-btn.active::after {
            content: 'ACTIVE';
            position: absolute;
            bottom: 0; left: 0; width: 100%;
            font-size: 6px;
            background: #000;
            color: var(--secondary-color);
            text-align: center;
            line-height: 8px;
        }
        
        /* Tech Card Style for Anime Items */
        .anime-card-tech {
            position: relative;
            background: rgba(0,0,0,0.3);
            border: 1px solid var(--border-color);
            transition: all 0.3s ease;
        }
        .anime-card-tech:hover {
            background: rgba(var(--secondary-color), 0.05);
            border-color: var(--secondary-color);
        }
        .anime-card-tech::before {
            content: ''; position: absolute; left: 0; top: 0; bottom: 0; width: 2px;
            background: var(--border-color);
            transition: background 0.3s;
        }
        .anime-card-tech:hover::before {
            background: var(--secondary-color);
            box-shadow: 0 0 8px var(--secondary-color);
        }
        
        /* --- 修复核心：确保动画 Keyframes 在纯 CSS 中可用 --- */
        /* List enter animation */
        .anime-item-enter {
            opacity: 0;
            animation: dataStream 0.3s cubic-bezier(0.4, 0, 0.2, 1) forwards;
        }
        
        @keyframes dataStream {
            0% { opacity: 0; transform: translateX(-10px); }
            100% { opacity: 1; transform: translateX(0); }
        }

        /* 兼容性增强：如果用户系统开启了减弱动画，直接显示 */
        @media (prefers-reduced-motion: reduce) {
            .anime-item-enter {
                opacity: 1;
                animation: none;
            }
        /* --- UPGRADE: TACTICAL PROGRESS & MENU --- */
        
        /* 1. 进度条样式 (Energy Cell) */
        .tactical-progress-container {
            display: flex; align-items: center; gap: 4px; margin-top: 6px;
        }
        .progress-cells {
            display: flex; gap: 1px; flex: 1; height: 6px;
            background: rgba(0,0,0,0.5); border: 1px solid var(--border-color);
        }
        .p-cell {
            flex: 1; background: rgba(255,255,255,0.1); transition: all 0.2s;
            cursor: pointer;
        }
        .p-cell:hover { background: var(--secondary-color); opacity: 0.5; }
        .p-cell.filled { background: var(--secondary-color); box-shadow: 0 0 5px var(--secondary-color); }
        .progress-btn {
            width: 16px; height: 16px; display: flex; items-center; justify-center;
            border: 1px solid var(--secondary-color); color: var(--secondary-color);
            font-size: 10px; cursor: pointer; transition: all 0.2s;
        }
        .progress-btn:hover { background: var(--secondary-color); color: black; }

        /* ==========================================================================
   MODULE: 05 PIXIV & 06 STEAM (TACTICAL STYLES)
   ========================================================================== */

/* --- Steam: 同步率仪表盘动画 --- */
#sync-rate-circle {
    transition: stroke-dashoffset 2s cubic-bezier(0.25, 1, 0.5, 1), stroke 2s ease;
    /* 初始状态：让圆环看起来有点发光 */
    filter: drop-shadow(0 0 5px currentColor);
}

/* --- Pixiv: 瀑布流布局 (Masonry Layout) --- */
/* 覆盖 Tailwind 的 columns，使用更稳定的 CSS 原生列布局 */
#pixiv-grid {
    column-count: 2;
    column-gap: 1rem;
}
@media (min-width: 768px) {
    #pixiv-grid { column-count: 3; }
}
@media (min-width: 1024px) {
    #pixiv-grid { column-count: 4; }
}

/* 防止卡片在列之间断裂 */
#pixiv-grid > div {
    break-inside: avoid;
    margin-bottom: 1rem;
    backface-visibility: hidden; /* 修复部分浏览器闪烁 */
}

/* 游戏列表的进入动画增强 */
@keyframes dataStream {
    0% { opacity: 0; transform: translateX(-20px); }
    100% { opacity: 1; transform: translateX(0); }
}

        /* --- TACTICAL BUTTONS (强制水平修正版) --- */
        .tactical-controls {
            display: flex !important;       /* 强制 Flex 布局 */
            flex-direction: row !important; /* 强制水平排列 */
            flex-wrap: nowrap !important;   /* 禁止换行 */
            align-items: center;
            width: 100%;                    /* 占满容器宽度 */
            gap: 2px; 
            margin-top: 6px; 
            padding-top: 4px;
            border-top: 1px dashed rgba(255,255,255,0.15);
        }
        
        .ctrl-btn {
            flex: 1 1 0% !important;        /* 强制均分宽度，允许压缩 */
            display: flex !important; 
            align-items: center; 
            justify-content: center;
            gap: 2px;
            white-space: nowrap;            /* 禁止文字换行 */
            
            text-align: center; 
            font-size: 9px; 
            font-weight: bold;
            height: 20px;                   /* 固定高度，防止被拉长 */
            line-height: 20px;
            
            cursor: pointer; 
            border: 1px solid var(--border-color);
            background: rgba(0,0,0,0.4); 
            color: var(--text-muted); 
            transition: all 0.2s;
            font-family: 'Noto Sans JP', sans-serif;
            border-radius: 2px;
            min-width: 0;                   /* 关键：允许 Flex 子项缩小到内容以下 */
        }
        
        .ctrl-btn:hover { background: var(--secondary-color); color: black; border-color: var(--secondary-color); }
        .ctrl-btn svg { width: 10px; height: 10px; flex-shrink: 0; } /* 防止图标被压扁 */

        /* 激活状态颜色保持不变 */
        .ctrl-btn.active-watching { background: #39ff14; color: black; border-color: #39ff14; }
        .ctrl-btn.active-todo { background: #ffae00; color: black; border-color: #ffae00; }
        .ctrl-btn.active-watched { background: #ff2a2a; color: white; border-color: #ff2a2a; }
        .ctrl-btn.active-dropped { background: #555; color: #aaa; border-color: #555; }

        /* 3. 分组标题 */
        .group-header {
            font-family: 'JetBrains Mono'; font-size: 10px; font-weight: bold;
            color: var(--text-muted); padding: 8px 4px 4px; border-bottom: 1px solid var(--border-color);
            margin-top: 12px; margin-bottom: 4px; display: flex; justify-content: space-between;
        }
        .group-header.syncing { color: var(--secondary-color); border-color: var(--secondary-color); }</body>